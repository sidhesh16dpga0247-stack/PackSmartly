{% extends 'base.html' %}
{% block title %}Dashboard{% endblock %}
{% block content %}

<h2>Welcome, {{ username }}!</h2>

<a href="/create-list" class="btn">Create New Packing List</a>

<h3>Your Trips</h3>

<!-- SAFE way to inject JSON into JS -->
<script>
    const TRIPS_DATA = JSON.parse(`{{ trips_json | safe }}`);
</script>

<div class="card">
  <ul id="tripsList"></ul>
</div>

<!-- Modal for viewing/editing a trip -->
<div id="tripModal" class="modal" style="display:none;">
  <div class="modal-content card">
    <span id="closeModal" class="close">&times;</span>

    <h3 id="modalTitle"></h3>

    <div style="margin-bottom: 12px;">
      <button class="btn-ghost" id="renameTripBtn">Rename Trip</button>
      <button class="btn-danger" id="deleteTripBtn">Delete Trip</button>
    </div>


    <div id="itemsContainer"></div>

    <h4>Add Custom Item</h4>
    <input type="text" id="newItemInput">
    <button class="btn" id="addItemBtn">Add Item</button>

    <br><br>
    <button class="btn" id="saveChangesBtn">Save Changes</button>
    <button class="btn-ghost" id="downloadPdfBtn">Download PDF</button>
  </div>
</div>

<!-- Dashboard JS -->
<script src="{{ url_for('static', filename='dashboard.js') }}"></script>

{% endblock %}
